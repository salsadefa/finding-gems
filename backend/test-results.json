{"numFailedTestSuites":6,"numFailedTests":30,"numPassedTestSuites":2,"numPassedTests":43,"numPendingTestSuites":0,"numPendingTests":10,"numRuntimeErrorTestSuites":0,"numTodoTests":0,"numTotalTestSuites":8,"numTotalTests":83,"openHandles":[],"snapshot":{"added":0,"didUpdate":false,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0},"startTime":1770259605077,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["Category Controller","getCategories"],"duration":4,"failureDetails":[{"matcherResult":{"message":"expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: 200\n\nNumber of calls: 0","pass":false}}],"failureMessages":["Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: 200\n\nNumber of calls: 0\n    at Object.<anonymous> (/Users/arkan/finding-gems/backend/tests/unit/category.controller.test.ts:38:22)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)"],"fullName":"Category Controller getCategories should return all categories","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return all categories"},{"ancestorTitles":["Category Controller","getCategories"],"duration":1,"failureDetails":[{"matcherResult":{"message":"expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: 200\n\nNumber of calls: 0","pass":false}}],"failureMessages":["Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: 200\n\nNumber of calls: 0\n    at Object.<anonymous> (/Users/arkan/finding-gems/backend/tests/unit/category.controller.test.ts:56:22)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)"],"fullName":"Category Controller getCategories should handle empty categories","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should handle empty categories"},{"ancestorTitles":["Category Controller","getCategoryById"],"duration":50,"failureDetails":[],"failureMessages":[],"fullName":"Category Controller getCategoryById should return category by ID","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return category by ID"},{"ancestorTitles":["Category Controller","getCategoryById"],"duration":67,"failureDetails":[{"matcherResult":{"message":"expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: ObjectContaining {\"statusCode\": 404}\n\nNumber of calls: 0","pass":false}}],"failureMessages":["Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: ObjectContaining {\"statusCode\": 404}\n\nNumber of calls: 0\n    at Object.<anonymous> (/Users/arkan/finding-gems/backend/tests/unit/category.controller.test.ts:108:20)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)"],"fullName":"Category Controller getCategoryById should return 404 if category not found","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 404 if category not found"},{"ancestorTitles":["Category Controller","createCategory"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Category Controller createCategory should create category successfully","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should create category successfully"},{"ancestorTitles":["Category Controller","createCategory"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Category Controller createCategory should validate required fields (name and slug)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should validate required fields (name and slug)"},{"ancestorTitles":["Category Controller","createCategory"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Category Controller createCategory should validate slug is required","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should validate slug is required"},{"ancestorTitles":["Category Controller","createCategory"],"duration":0,"failureDetails":[{"matcherResult":{"message":"expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: ObjectContaining {\"statusCode\": 400}\n\nNumber of calls: 0","pass":false}}],"failureMessages":["Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: ObjectContaining {\"statusCode\": 400}\n\nNumber of calls: 0\n    at Object.<anonymous> (/Users/arkan/finding-gems/backend/tests/unit/category.controller.test.ts:190:20)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)"],"fullName":"Category Controller createCategory should handle database insert errors","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should handle database insert errors"}],"endTime":1770259609631,"message":"  ● Category Controller › getCategories › should return all categories\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: 200\n\n    Number of calls: 0\n\n      36 |       await getCategories(req as Request, res as Response, next);\n      37 |\n    > 38 |       expect(status).toHaveBeenCalledWith(200);\n         |                      ^\n      39 |       expect(json).toHaveBeenCalledWith(expect.objectContaining({\n      40 |         success: true,\n      41 |         data: expect.objectContaining({\n\n      at Object.<anonymous> (tests/unit/category.controller.test.ts:38:22)\n\n  ● Category Controller › getCategories › should handle empty categories\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: 200\n\n    Number of calls: 0\n\n      54 |       await getCategories(req as Request, res as Response, next);\n      55 |\n    > 56 |       expect(status).toHaveBeenCalledWith(200);\n         |                      ^\n      57 |       expect(json).toHaveBeenCalledWith(expect.objectContaining({\n      58 |         data: expect.objectContaining({\n      59 |           categories: []\n\n      at Object.<anonymous> (tests/unit/category.controller.test.ts:56:22)\n\n  ● Category Controller › getCategoryById › should return 404 if category not found\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: ObjectContaining {\"statusCode\": 404}\n\n    Number of calls: 0\n\n      106 |       await getCategoryById(req as Request, res as Response, next);\n      107 |\n    > 108 |       expect(next).toHaveBeenCalledWith(expect.objectContaining({\n          |                    ^\n      109 |         statusCode: 404\n      110 |       }));\n      111 |     });\n\n      at Object.<anonymous> (tests/unit/category.controller.test.ts:108:20)\n\n  ● Category Controller › createCategory › should handle database insert errors\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: ObjectContaining {\"statusCode\": 400}\n\n    Number of calls: 0\n\n      188 |       await createCategory(req as Request, res as Response, next);\n      189 |\n    > 190 |       expect(next).toHaveBeenCalledWith(expect.objectContaining({\n          |                    ^\n      191 |         statusCode: 400\n      192 |       }));\n      193 |     });\n\n      at Object.<anonymous> (tests/unit/category.controller.test.ts:190:20)\n","name":"/Users/arkan/finding-gems/backend/tests/unit/category.controller.test.ts","startTime":1770259605649,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Creator Application Controller","getMyApplication"],"duration":39,"failureDetails":[],"failureMessages":[],"fullName":"Creator Application Controller getMyApplication should return 403 if user is not authenticated","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return 403 if user is not authenticated"},{"ancestorTitles":["Creator Application Controller","getMyApplication"],"duration":23,"failureDetails":[],"failureMessages":[],"fullName":"Creator Application Controller getMyApplication should return 404 if no application exists","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return 404 if no application exists"},{"ancestorTitles":["Creator Application Controller","getMyApplication"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Creator Application Controller getMyApplication should return application if exists","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should return application if exists"},{"ancestorTitles":["Creator Application Controller","createApplication"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Creator Application Controller createApplication should return 403 if user is not authenticated","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return 403 if user is not authenticated"},{"ancestorTitles":["Creator Application Controller","createApplication"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Creator Application Controller createApplication should return 400 if user is already a creator","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should return 400 if user is already a creator"},{"ancestorTitles":["Creator Application Controller","createApplication"],"duration":null,"failureDetails":[],"failureMessages":[],"fullName":"Creator Application Controller createApplication should return 400 if bio is too short","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"pending","title":"should return 400 if bio is too short"},{"ancestorTitles":["Creator Application Controller","createApplication"],"duration":null,"failureDetails":[],"failureMessages":[],"fullName":"Creator Application Controller createApplication should return 400 if motivation is too short","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"pending","title":"should return 400 if motivation is too short"},{"ancestorTitles":["Creator Application Controller","createApplication"],"duration":null,"failureDetails":[],"failureMessages":[],"fullName":"Creator Application Controller createApplication should return 400 if portfolio URL is invalid","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"pending","title":"should return 400 if portfolio URL is invalid"},{"ancestorTitles":["Creator Application Controller","createApplication"],"duration":null,"failureDetails":[],"failureMessages":[],"fullName":"Creator Application Controller createApplication should return 400 if user has pending application","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"pending","title":"should return 400 if user has pending application"},{"ancestorTitles":["Creator Application Controller","createApplication"],"duration":null,"failureDetails":[],"failureMessages":[],"fullName":"Creator Application Controller createApplication should create application successfully with valid data","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"pending","title":"should create application successfully with valid data"},{"ancestorTitles":["Creator Application Controller","getApplications"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Creator Application Controller getApplications should return 403 if user is not admin","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should return 403 if user is not admin"},{"ancestorTitles":["Creator Application Controller","getApplications"],"duration":null,"failureDetails":[],"failureMessages":[],"fullName":"Creator Application Controller getApplications should return applications list for admin","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"pending","title":"should return applications list for admin"},{"ancestorTitles":["Creator Application Controller","getApplications"],"duration":null,"failureDetails":[],"failureMessages":[],"fullName":"Creator Application Controller getApplications should filter by status when provided","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"pending","title":"should filter by status when provided"},{"ancestorTitles":["Creator Application Controller","approveApplication"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Creator Application Controller approveApplication should return 403 if user is not admin","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return 403 if user is not admin"},{"ancestorTitles":["Creator Application Controller","approveApplication"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Creator Application Controller approveApplication should return 400 for invalid UUID format","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should return 400 for invalid UUID format"},{"ancestorTitles":["Creator Application Controller","approveApplication"],"duration":null,"failureDetails":[],"failureMessages":[],"fullName":"Creator Application Controller approveApplication should return 404 if application not found","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"pending","title":"should return 404 if application not found"},{"ancestorTitles":["Creator Application Controller","approveApplication"],"duration":null,"failureDetails":[],"failureMessages":[],"fullName":"Creator Application Controller approveApplication should return 400 if application is not pending","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"pending","title":"should return 400 if application is not pending"},{"ancestorTitles":["Creator Application Controller","rejectApplication"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"Creator Application Controller rejectApplication should return 403 if user is not admin","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return 403 if user is not admin"},{"ancestorTitles":["Creator Application Controller","rejectApplication"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Creator Application Controller rejectApplication should return 400 for invalid UUID format","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return 400 for invalid UUID format"},{"ancestorTitles":["Creator Application Controller","rejectApplication"],"duration":null,"failureDetails":[],"failureMessages":[],"fullName":"Creator Application Controller rejectApplication should return 404 if application not found","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"pending","title":"should return 404 if application not found"}],"endTime":1770259609673,"message":"","name":"/Users/arkan/finding-gems/backend/tests/unit/creator-application.controller.test.ts","startTime":1770259605649,"status":"focused","summary":""},{"assertionResults":[{"ancestorTitles":["Error Classes","AppError"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Error Classes AppError should create error with correct properties","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"should create error with correct properties"},{"ancestorTitles":["Error Classes","AppError"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Error Classes AppError should set status based on status code","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should set status based on status code"},{"ancestorTitles":["Error Classes","ValidationError"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Error Classes ValidationError should have status code 400","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should have status code 400"},{"ancestorTitles":["Error Classes","ValidationError"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Error Classes ValidationError should store field errors","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should store field errors"},{"ancestorTitles":["Error Classes","NotFoundError"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Error Classes NotFoundError should have status code 404","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should have status code 404"},{"ancestorTitles":["Error Classes","NotFoundError"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Error Classes NotFoundError should have default message","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should have default message"},{"ancestorTitles":["Error Classes","UnauthorizedError"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Error Classes UnauthorizedError should have status code 401","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should have status code 401"},{"ancestorTitles":["Error Classes","ForbiddenError"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Error Classes ForbiddenError should have status code 403","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should have status code 403"},{"ancestorTitles":["Error Classes","BadRequestError"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Error Classes BadRequestError should have status code 400","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should have status code 400"},{"ancestorTitles":["Error Classes","ConflictError"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Error Classes ConflictError should have status code 409","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should have status code 409"},{"ancestorTitles":["Error Classes","RateLimitError"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Error Classes RateLimitError should have status code 429","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should have status code 429"},{"ancestorTitles":["Error Classes","InternalServerError"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Error Classes InternalServerError should have status code 500","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should have status code 500"}],"endTime":1770259609814,"message":"","name":"/Users/arkan/finding-gems/backend/tests/unit/errors.test.ts","startTime":1770259609727,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Bookmark Controller","getMyBookmarks"],"duration":13,"failureDetails":[],"failureMessages":[],"fullName":"Bookmark Controller getMyBookmarks should return user bookmarks","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return user bookmarks"},{"ancestorTitles":["Bookmark Controller","getMyBookmarks"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Bookmark Controller getMyBookmarks should return empty array if no bookmarks","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return empty array if no bookmarks"},{"ancestorTitles":["Bookmark Controller","createBookmark"],"duration":2,"failureDetails":[{"matcherResult":{"message":"expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: 201\n\nNumber of calls: 0","pass":false}}],"failureMessages":["Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: 201\n\nNumber of calls: 0\n    at Object.<anonymous> (/Users/arkan/finding-gems/backend/tests/unit/bookmark.controller.test.ts:100:22)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)"],"fullName":"Bookmark Controller createBookmark should create bookmark successfully","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should create bookmark successfully"},{"ancestorTitles":["Bookmark Controller","createBookmark"],"duration":3,"failureDetails":[{"matcherResult":{"message":"expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: ObjectContaining {\"message\": \"Website already bookmarked\", \"statusCode\": 409}\n\nNumber of calls: 0","pass":false}}],"failureMessages":["Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: ObjectContaining {\"message\": \"Website already bookmarked\", \"statusCode\": 409}\n\nNumber of calls: 0\n    at Object.<anonymous> (/Users/arkan/finding-gems/backend/tests/unit/bookmark.controller.test.ts:118:20)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)"],"fullName":"Bookmark Controller createBookmark should fail if already bookmarked","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should fail if already bookmarked"},{"ancestorTitles":["Bookmark Controller","createBookmark"],"duration":1,"failureDetails":[{"matcherResult":{"message":"expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: ObjectContaining {\"message\": \"Website not found\", \"statusCode\": 404}\n\nNumber of calls: 0","pass":false}}],"failureMessages":["Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: ObjectContaining {\"message\": \"Website not found\", \"statusCode\": 404}\n\nNumber of calls: 0\n    at Object.<anonymous> (/Users/arkan/finding-gems/backend/tests/unit/bookmark.controller.test.ts:133:20)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)"],"fullName":"Bookmark Controller createBookmark should fail if website not found","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should fail if website not found"},{"ancestorTitles":["Bookmark Controller","createBookmark"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Bookmark Controller createBookmark should fail if websiteId not provided","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should fail if websiteId not provided"},{"ancestorTitles":["Bookmark Controller","deleteBookmark"],"duration":1,"failureDetails":[{"matcherResult":{"message":"expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: 200\n\nNumber of calls: 0","pass":false}}],"failureMessages":["Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: 200\n\nNumber of calls: 0\n    at Object.<anonymous> (/Users/arkan/finding-gems/backend/tests/unit/bookmark.controller.test.ts:167:22)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)"],"fullName":"Bookmark Controller deleteBookmark should remove bookmark successfully","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should remove bookmark successfully"},{"ancestorTitles":["Bookmark Controller","deleteBookmark"],"duration":0,"failureDetails":[{"matcherResult":{"message":"expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: ObjectContaining {\"message\": \"Bookmark not found\", \"statusCode\": 404}\n\nNumber of calls: 0","pass":false}}],"failureMessages":["Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: ObjectContaining {\"message\": \"Bookmark not found\", \"statusCode\": 404}\n\nNumber of calls: 0\n    at Object.<anonymous> (/Users/arkan/finding-gems/backend/tests/unit/bookmark.controller.test.ts:183:20)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)"],"fullName":"Bookmark Controller deleteBookmark should fail if bookmark not found","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should fail if bookmark not found"},{"ancestorTitles":["Bookmark Controller","checkBookmark"],"duration":11,"failureDetails":[],"failureMessages":[],"fullName":"Bookmark Controller checkBookmark should return true if bookmarked","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return true if bookmarked"},{"ancestorTitles":["Bookmark Controller","checkBookmark"],"duration":9,"failureDetails":[],"failureMessages":[],"fullName":"Bookmark Controller checkBookmark should return false if not bookmarked","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return false if not bookmarked"}],"endTime":1770259609931,"message":"  ● Bookmark Controller › createBookmark › should create bookmark successfully\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: 201\n\n    Number of calls: 0\n\n       98 |       await createBookmark(req as Request, res as Response, next);\n       99 |\n    > 100 |       expect(status).toHaveBeenCalledWith(201);\n          |                      ^\n      101 |       expect(json).toHaveBeenCalledWith(expect.objectContaining({\n      102 |         success: true,\n      103 |         message: 'Website bookmarked successfully'\n\n      at Object.<anonymous> (tests/unit/bookmark.controller.test.ts:100:22)\n\n  ● Bookmark Controller › createBookmark › should fail if already bookmarked\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: ObjectContaining {\"message\": \"Website already bookmarked\", \"statusCode\": 409}\n\n    Number of calls: 0\n\n      116 |       await createBookmark(req as Request, res as Response, next);\n      117 |\n    > 118 |       expect(next).toHaveBeenCalledWith(expect.objectContaining({\n          |                    ^\n      119 |         statusCode: 409,\n      120 |         message: 'Website already bookmarked'\n      121 |       }));\n\n      at Object.<anonymous> (tests/unit/bookmark.controller.test.ts:118:20)\n\n  ● Bookmark Controller › createBookmark › should fail if website not found\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: ObjectContaining {\"message\": \"Website not found\", \"statusCode\": 404}\n\n    Number of calls: 0\n\n      131 |       await createBookmark(req as Request, res as Response, next);\n      132 |\n    > 133 |       expect(next).toHaveBeenCalledWith(expect.objectContaining({\n          |                    ^\n      134 |         statusCode: 404,\n      135 |         message: 'Website not found'\n      136 |       }));\n\n      at Object.<anonymous> (tests/unit/bookmark.controller.test.ts:133:20)\n\n  ● Bookmark Controller › deleteBookmark › should remove bookmark successfully\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: 200\n\n    Number of calls: 0\n\n      165 |       await deleteBookmark(req as Request, res as Response, next);\n      166 |\n    > 167 |       expect(status).toHaveBeenCalledWith(200);\n          |                      ^\n      168 |       expect(json).toHaveBeenCalledWith(expect.objectContaining({\n      169 |         success: true,\n      170 |         message: 'Bookmark removed successfully'\n\n      at Object.<anonymous> (tests/unit/bookmark.controller.test.ts:167:22)\n\n  ● Bookmark Controller › deleteBookmark › should fail if bookmark not found\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: ObjectContaining {\"message\": \"Bookmark not found\", \"statusCode\": 404}\n\n    Number of calls: 0\n\n      181 |       await deleteBookmark(req as Request, res as Response, next);\n      182 |\n    > 183 |       expect(next).toHaveBeenCalledWith(expect.objectContaining({\n          |                    ^\n      184 |         statusCode: 404,\n      185 |         message: 'Bookmark not found'\n      186 |       }));\n\n      at Object.<anonymous> (tests/unit/bookmark.controller.test.ts:183:20)\n","name":"/Users/arkan/finding-gems/backend/tests/unit/bookmark.controller.test.ts","startTime":1770259605668,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Auth Controller","Register"],"duration":14,"failureDetails":[{"matcherResult":{"message":"expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: 201\n\nNumber of calls: 0","pass":false}}],"failureMessages":["Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: 201\n\nNumber of calls: 0\n    at Object.<anonymous> (/Users/arkan/finding-gems/backend/tests/unit/auth.controller.test.ts:88:22)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)"],"fullName":"Auth Controller Register should register a user successfully","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should register a user successfully"},{"ancestorTitles":["Auth Controller","Register"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Auth Controller Register should fail with weak password","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should fail with weak password"},{"ancestorTitles":["Auth Controller","Register"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"Auth Controller Register should fail with missing required fields","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should fail with missing required fields"},{"ancestorTitles":["Auth Controller","Register"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Auth Controller Register should fail with invalid email format","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should fail with invalid email format"},{"ancestorTitles":["Auth Controller","Login"],"duration":1,"failureDetails":[{"matcherResult":{"message":"expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: 200\n\nNumber of calls: 0","pass":false}}],"failureMessages":["Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: 200\n\nNumber of calls: 0\n    at Object.<anonymous> (/Users/arkan/finding-gems/backend/tests/unit/auth.controller.test.ts:164:22)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)"],"fullName":"Auth Controller Login should login successfully","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should login successfully"},{"ancestorTitles":["Auth Controller","Login"],"duration":0,"failureDetails":[{"matcherResult":{"message":"expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: ObjectContaining {\"statusCode\": 401}\n\nNumber of calls: 0","pass":false}}],"failureMessages":["Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: ObjectContaining {\"statusCode\": 401}\n\nNumber of calls: 0\n    at Object.<anonymous> (/Users/arkan/finding-gems/backend/tests/unit/auth.controller.test.ts:184:20)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)"],"fullName":"Auth Controller Login should fail if user not found","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should fail if user not found"},{"ancestorTitles":["Auth Controller","Login"],"duration":1,"failureDetails":[{"matcherResult":{"message":"expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: ObjectContaining {\"statusCode\": 401}\n\nNumber of calls: 0","pass":false}}],"failureMessages":["Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: ObjectContaining {\"statusCode\": 401}\n\nNumber of calls: 0\n    at Object.<anonymous> (/Users/arkan/finding-gems/backend/tests/unit/auth.controller.test.ts:211:20)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)"],"fullName":"Auth Controller Login should fail with wrong password","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should fail with wrong password"},{"ancestorTitles":["Auth Controller","Login"],"duration":0,"failureDetails":[{"matcherResult":{"message":"expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: ObjectContaining {\"statusCode\": 403}\n\nNumber of calls: 0","pass":false}}],"failureMessages":["Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: ObjectContaining {\"statusCode\": 403}\n\nNumber of calls: 0\n    at Object.<anonymous> (/Users/arkan/finding-gems/backend/tests/unit/auth.controller.test.ts:238:20)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)"],"fullName":"Auth Controller Login should fail if account is deactivated","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should fail if account is deactivated"},{"ancestorTitles":["Auth Controller","Login"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Auth Controller Login should fail with missing credentials","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should fail with missing credentials"}],"endTime":1770259610036,"message":"  ● Auth Controller › Register › should register a user successfully\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: 201\n\n    Number of calls: 0\n\n      86 |       await register(req as Request, res as Response, next);\n      87 |\n    > 88 |       expect(status).toHaveBeenCalledWith(201);\n         |                      ^\n      89 |       expect(json).toHaveBeenCalledWith(expect.objectContaining({\n      90 |         success: true,\n      91 |         message: 'User registered successfully'\n\n      at Object.<anonymous> (tests/unit/auth.controller.test.ts:88:22)\n\n  ● Auth Controller › Login › should login successfully\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: 200\n\n    Number of calls: 0\n\n      162 |       await login(req as Request, res as Response, next);\n      163 |\n    > 164 |       expect(status).toHaveBeenCalledWith(200);\n          |                      ^\n      165 |       expect(json).toHaveBeenCalledWith(expect.objectContaining({\n      166 |         success: true,\n      167 |         message: 'Login successful'\n\n      at Object.<anonymous> (tests/unit/auth.controller.test.ts:164:22)\n\n  ● Auth Controller › Login › should fail if user not found\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: ObjectContaining {\"statusCode\": 401}\n\n    Number of calls: 0\n\n      182 |       await login(req as Request, res as Response, next);\n      183 |\n    > 184 |       expect(next).toHaveBeenCalledWith(expect.objectContaining({\n          |                    ^\n      185 |         statusCode: 401\n      186 |       }));\n      187 |     });\n\n      at Object.<anonymous> (tests/unit/auth.controller.test.ts:184:20)\n\n  ● Auth Controller › Login › should fail with wrong password\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: ObjectContaining {\"statusCode\": 401}\n\n    Number of calls: 0\n\n      209 |       await login(req as Request, res as Response, next);\n      210 |\n    > 211 |       expect(next).toHaveBeenCalledWith(expect.objectContaining({\n          |                    ^\n      212 |         statusCode: 401\n      213 |       }));\n      214 |     });\n\n      at Object.<anonymous> (tests/unit/auth.controller.test.ts:211:20)\n\n  ● Auth Controller › Login › should fail if account is deactivated\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: ObjectContaining {\"statusCode\": 403}\n\n    Number of calls: 0\n\n      236 |       await login(req as Request, res as Response, next);\n      237 |\n    > 238 |       expect(next).toHaveBeenCalledWith(expect.objectContaining({\n          |                    ^\n      239 |         statusCode: 403\n      240 |       }));\n      241 |     });\n\n      at Object.<anonymous> (tests/unit/auth.controller.test.ts:238:20)\n","name":"/Users/arkan/finding-gems/backend/tests/unit/auth.controller.test.ts","startTime":1770259605669,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Review Controller","getReviews"],"duration":16,"failureDetails":[{"matcherResult":{"message":"expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: 200\n\nNumber of calls: 0","pass":false}}],"failureMessages":["Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: 200\n\nNumber of calls: 0\n    at Object.<anonymous> (/Users/arkan/finding-gems/backend/tests/unit/review.controller.test.ts:54:22)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)"],"fullName":"Review Controller getReviews should return paginated reviews","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return paginated reviews"},{"ancestorTitles":["Review Controller","getReviews"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Review Controller getReviews should filter by websiteId","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should filter by websiteId"},{"ancestorTitles":["Review Controller","createReview"],"duration":1,"failureDetails":[{"matcherResult":{"message":"expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: 201\n\nNumber of calls: 0","pass":false}}],"failureMessages":["Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: 201\n\nNumber of calls: 0\n    at Object.<anonymous> (/Users/arkan/finding-gems/backend/tests/unit/review.controller.test.ts:114:22)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)"],"fullName":"Review Controller createReview should create a review successfully","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should create a review successfully"},{"ancestorTitles":["Review Controller","createReview"],"duration":4,"failureDetails":[{"matcherResult":{"message":"expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: ObjectContaining {\"message\": \"You have already reviewed this website\", \"statusCode\": 409}\n\nNumber of calls: 0","pass":false}}],"failureMessages":["Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: ObjectContaining {\"message\": \"You have already reviewed this website\", \"statusCode\": 409}\n\nNumber of calls: 0\n    at Object.<anonymous> (/Users/arkan/finding-gems/backend/tests/unit/review.controller.test.ts:137:20)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)"],"fullName":"Review Controller createReview should prevent duplicate reviews from same user","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should prevent duplicate reviews from same user"},{"ancestorTitles":["Review Controller","createReview"],"duration":2,"failureDetails":[{"matcherResult":{"message":"expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: ObjectContaining {\"message\": \"Website not found\", \"statusCode\": 404}\n\nNumber of calls: 0","pass":false}}],"failureMessages":["Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: ObjectContaining {\"message\": \"Website not found\", \"statusCode\": 404}\n\nNumber of calls: 0\n    at Object.<anonymous> (/Users/arkan/finding-gems/backend/tests/unit/review.controller.test.ts:157:20)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)"],"fullName":"Review Controller createReview should fail if website not found","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should fail if website not found"},{"ancestorTitles":["Review Controller","createReview"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Review Controller createReview should validate review content length","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should validate review content length"},{"ancestorTitles":["Review Controller","deleteReview"],"duration":2,"failureDetails":[{"matcherResult":{"message":"expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: 200\n\nNumber of calls: 0","pass":false}}],"failureMessages":["Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: 200\n\nNumber of calls: 0\n    at Object.<anonymous> (/Users/arkan/finding-gems/backend/tests/unit/review.controller.test.ts:202:22)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)"],"fullName":"Review Controller deleteReview should delete own review","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should delete own review"},{"ancestorTitles":["Review Controller","deleteReview"],"duration":2,"failureDetails":[{"matcherResult":{"message":"expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: ObjectContaining {\"statusCode\": 403}\n\nNumber of calls: 0","pass":false}}],"failureMessages":["Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: ObjectContaining {\"statusCode\": 403}\n\nNumber of calls: 0\n    at Object.<anonymous> (/Users/arkan/finding-gems/backend/tests/unit/review.controller.test.ts:223:20)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)"],"fullName":"Review Controller deleteReview should forbid deleting other users review","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should forbid deleting other users review"},{"ancestorTitles":["Review Controller","deleteReview"],"duration":1,"failureDetails":[{"matcherResult":{"message":"expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: 200\n\nNumber of calls: 0","pass":false}}],"failureMessages":["Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: 200\n\nNumber of calls: 0\n    at Object.<anonymous> (/Users/arkan/finding-gems/backend/tests/unit/review.controller.test.ts:245:22)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)"],"fullName":"Review Controller deleteReview should allow admin to delete any review","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should allow admin to delete any review"}],"endTime":1770259610088,"message":"  ● Review Controller › getReviews › should return paginated reviews\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: 200\n\n    Number of calls: 0\n\n      52 |       await getReviews(req as Request, res as Response, next);\n      53 |\n    > 54 |       expect(status).toHaveBeenCalledWith(200);\n         |                      ^\n      55 |       expect(json).toHaveBeenCalledWith(expect.objectContaining({\n      56 |         success: true,\n      57 |         data: expect.objectContaining({\n\n      at Object.<anonymous> (tests/unit/review.controller.test.ts:54:22)\n\n  ● Review Controller › createReview › should create a review successfully\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: 201\n\n    Number of calls: 0\n\n      112 |       await createReview(req as Request, res as Response, next);\n      113 |\n    > 114 |       expect(status).toHaveBeenCalledWith(201);\n          |                      ^\n      115 |       expect(json).toHaveBeenCalledWith(expect.objectContaining({\n      116 |         success: true,\n      117 |         message: 'Review created successfully'\n\n      at Object.<anonymous> (tests/unit/review.controller.test.ts:114:22)\n\n  ● Review Controller › createReview › should prevent duplicate reviews from same user\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: ObjectContaining {\"message\": \"You have already reviewed this website\", \"statusCode\": 409}\n\n    Number of calls: 0\n\n      135 |       await createReview(req as Request, res as Response, next);\n      136 |\n    > 137 |       expect(next).toHaveBeenCalledWith(expect.objectContaining({\n          |                    ^\n      138 |         statusCode: 409,\n      139 |         message: 'You have already reviewed this website'\n      140 |       }));\n\n      at Object.<anonymous> (tests/unit/review.controller.test.ts:137:20)\n\n  ● Review Controller › createReview › should fail if website not found\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: ObjectContaining {\"message\": \"Website not found\", \"statusCode\": 404}\n\n    Number of calls: 0\n\n      155 |       await createReview(req as Request, res as Response, next);\n      156 |\n    > 157 |       expect(next).toHaveBeenCalledWith(expect.objectContaining({\n          |                    ^\n      158 |         statusCode: 404,\n      159 |         message: 'Website not found'\n      160 |       }));\n\n      at Object.<anonymous> (tests/unit/review.controller.test.ts:157:20)\n\n  ● Review Controller › deleteReview › should delete own review\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: 200\n\n    Number of calls: 0\n\n      200 |       await deleteReview(req as Request, res as Response, next);\n      201 |\n    > 202 |       expect(status).toHaveBeenCalledWith(200);\n          |                      ^\n      203 |       expect(json).toHaveBeenCalledWith(expect.objectContaining({\n      204 |         success: true,\n      205 |         message: 'Review deleted successfully'\n\n      at Object.<anonymous> (tests/unit/review.controller.test.ts:202:22)\n\n  ● Review Controller › deleteReview › should forbid deleting other users review\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: ObjectContaining {\"statusCode\": 403}\n\n    Number of calls: 0\n\n      221 |       await deleteReview(req as Request, res as Response, next);\n      222 |\n    > 223 |       expect(next).toHaveBeenCalledWith(expect.objectContaining({\n          |                    ^\n      224 |         statusCode: 403\n      225 |       }));\n      226 |     });\n\n      at Object.<anonymous> (tests/unit/review.controller.test.ts:223:20)\n\n  ● Review Controller › deleteReview › should allow admin to delete any review\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: 200\n\n    Number of calls: 0\n\n      243 |       await deleteReview(req as Request, res as Response, next);\n      244 |\n    > 245 |       expect(status).toHaveBeenCalledWith(200);\n          |                      ^\n      246 |     });\n      247 |   });\n      248 | });\n\n      at Object.<anonymous> (tests/unit/review.controller.test.ts:245:22)\n","name":"/Users/arkan/finding-gems/backend/tests/unit/review.controller.test.ts","startTime":1770259605653,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Website Controller","getWebsiteById"],"duration":9,"failureDetails":[{"matcherResult":{"message":"expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: 200\n\nNumber of calls: 0","pass":false}}],"failureMessages":["Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: 200\n\nNumber of calls: 0\n    at Object.<anonymous> (/Users/arkan/finding-gems/backend/tests/unit/website.controller.test.ts:57:22)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)"],"fullName":"Website Controller getWebsiteById should return website details","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return website details"},{"ancestorTitles":["Website Controller","getWebsiteById"],"duration":3,"failureDetails":[{"matcherResult":{"message":"expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: ObjectContaining {\"statusCode\": 404}\n\nNumber of calls: 0","pass":false}}],"failureMessages":["Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: ObjectContaining {\"statusCode\": 404}\n\nNumber of calls: 0\n    at Object.<anonymous> (/Users/arkan/finding-gems/backend/tests/unit/website.controller.test.ts:74:20)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)"],"fullName":"Website Controller getWebsiteById should return 404 if website not found","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 404 if website not found"},{"ancestorTitles":["Website Controller","getWebsiteById"],"duration":1,"failureDetails":[{"matcherResult":{"message":"expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: 200\n\nNumber of calls: 0","pass":false}}],"failureMessages":["Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: 200\n\nNumber of calls: 0\n    at Object.<anonymous> (/Users/arkan/finding-gems/backend/tests/unit/website.controller.test.ts:102:22)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)"],"fullName":"Website Controller getWebsiteById should increment view count for active websites","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should increment view count for active websites"},{"ancestorTitles":["Website Controller","createWebsite"],"duration":1,"failureDetails":[{"matcherResult":{"message":"expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: 201\n\nNumber of calls: 0","pass":false}}],"failureMessages":["Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: 201\n\nNumber of calls: 0\n    at Object.<anonymous> (/Users/arkan/finding-gems/backend/tests/unit/website.controller.test.ts:157:22)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)"],"fullName":"Website Controller createWebsite should create website successfully","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should create website successfully"},{"ancestorTitles":["Website Controller","createWebsite"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"Website Controller createWebsite should forbid non-creators from creating websites","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should forbid non-creators from creating websites"},{"ancestorTitles":["Website Controller","createWebsite"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Website Controller createWebsite should validate required fields","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should validate required fields"},{"ancestorTitles":["Website Controller","createWebsite"],"duration":17,"failureDetails":[{"matcherResult":{"message":"expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: ObjectContaining {\"statusCode\": 409}\nReceived: [Error: Name, description, categoryId, and externalUrl are required]\n\nNumber of calls: 1","pass":false}}],"failureMessages":["Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: ObjectContaining {\"statusCode\": 409}\nReceived: [Error: Name, description, categoryId, and externalUrl are required]\n\nNumber of calls: 1\n    at Object.<anonymous> (/Users/arkan/finding-gems/backend/tests/unit/website.controller.test.ts:217:20)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)"],"fullName":"Website Controller createWebsite should prevent duplicate URLs","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should prevent duplicate URLs"}],"endTime":1770259610093,"message":"  ● Website Controller › getWebsiteById › should return website details\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: 200\n\n    Number of calls: 0\n\n      55 |       await getWebsiteById(req as Request, res as Response, next);\n      56 |\n    > 57 |       expect(status).toHaveBeenCalledWith(200);\n         |                      ^\n      58 |       expect(json).toHaveBeenCalledWith(expect.objectContaining({\n      59 |         success: true,\n      60 |         data: expect.objectContaining({\n\n      at Object.<anonymous> (tests/unit/website.controller.test.ts:57:22)\n\n  ● Website Controller › getWebsiteById › should return 404 if website not found\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: ObjectContaining {\"statusCode\": 404}\n\n    Number of calls: 0\n\n      72 |       await getWebsiteById(req as Request, res as Response, next);\n      73 |\n    > 74 |       expect(next).toHaveBeenCalledWith(expect.objectContaining({\n         |                    ^\n      75 |         statusCode: 404\n      76 |       }));\n      77 |     });\n\n      at Object.<anonymous> (tests/unit/website.controller.test.ts:74:20)\n\n  ● Website Controller › getWebsiteById › should increment view count for active websites\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: 200\n\n    Number of calls: 0\n\n      100 |       await getWebsiteById(req as Request, res as Response, next);\n      101 |\n    > 102 |       expect(status).toHaveBeenCalledWith(200);\n          |                      ^\n      103 |     });\n      104 |   });\n      105 |\n\n      at Object.<anonymous> (tests/unit/website.controller.test.ts:102:22)\n\n  ● Website Controller › createWebsite › should create website successfully\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: 201\n\n    Number of calls: 0\n\n      155 |       await createWebsite(req as Request, res as Response, next);\n      156 |\n    > 157 |       expect(status).toHaveBeenCalledWith(201);\n          |                      ^\n      158 |       expect(json).toHaveBeenCalledWith(expect.objectContaining({\n      159 |         success: true\n      160 |       }));\n\n      at Object.<anonymous> (tests/unit/website.controller.test.ts:157:22)\n\n  ● Website Controller › createWebsite › should prevent duplicate URLs\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: ObjectContaining {\"statusCode\": 409}\n    Received: [Error: Name, description, categoryId, and externalUrl are required]\n\n    Number of calls: 1\n\n      215 |       await createWebsite(req as Request, res as Response, next);\n      216 |\n    > 217 |       expect(next).toHaveBeenCalledWith(expect.objectContaining({\n          |                    ^\n      218 |         statusCode: 409\n      219 |       }));\n      220 |     });\n\n      at Object.<anonymous> (tests/unit/website.controller.test.ts:217:20)\n","name":"/Users/arkan/finding-gems/backend/tests/unit/website.controller.test.ts","startTime":1770259605664,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["User Controller","getUsers"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"User Controller getUsers should return paginated list of users","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return paginated list of users"},{"ancestorTitles":["User Controller","getUsers"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"User Controller getUsers should filter by role","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should filter by role"},{"ancestorTitles":["User Controller","getUserById"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"User Controller getUserById should return user details","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return user details"},{"ancestorTitles":["User Controller","getUserById"],"duration":1,"failureDetails":[{"matcherResult":{"message":"expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: ObjectContaining {\"statusCode\": 404}\n\nNumber of calls: 0","pass":false}}],"failureMessages":["Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: ObjectContaining {\"statusCode\": 404}\n\nNumber of calls: 0\n    at Object.<anonymous> (/Users/arkan/finding-gems/backend/tests/unit/user.controller.test.ts:121:20)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)"],"fullName":"User Controller getUserById should return 404 if user not found","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 404 if user not found"},{"ancestorTitles":["User Controller","getUserById"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"User Controller getUserById should allow admin to view any user","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should allow admin to view any user"},{"ancestorTitles":["User Controller","updateUser"],"duration":0,"failureDetails":[{"matcherResult":{"message":"expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: 200\n\nNumber of calls: 0","pass":false}}],"failureMessages":["Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: 200\n\nNumber of calls: 0\n    at Object.<anonymous> (/Users/arkan/finding-gems/backend/tests/unit/user.controller.test.ts:189:22)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)"],"fullName":"User Controller updateUser should update own profile","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should update own profile"},{"ancestorTitles":["User Controller","updateUser"],"duration":1,"failureDetails":[{"matcherResult":{"message":"expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: ObjectContaining {\"statusCode\": 403}\n\nNumber of calls: 0","pass":false}}],"failureMessages":["Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: ObjectContaining {\"statusCode\": 403}\n\nNumber of calls: 0\n    at Object.<anonymous> (/Users/arkan/finding-gems/backend/tests/unit/user.controller.test.ts:214:20)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)"],"fullName":"User Controller updateUser should forbid updating other users for non-admin","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should forbid updating other users for non-admin"},{"ancestorTitles":["User Controller","updateUser"],"duration":1,"failureDetails":[{"matcherResult":{"message":"expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: 200\n\nNumber of calls: 0","pass":false}}],"failureMessages":["Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: 200\n\nNumber of calls: 0\n    at Object.<anonymous> (/Users/arkan/finding-gems/backend/tests/unit/user.controller.test.ts:249:22)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)"],"fullName":"User Controller updateUser should allow admin to update any user","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should allow admin to update any user"}],"endTime":1770259610181,"message":"  ● User Controller › getUserById › should return 404 if user not found\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: ObjectContaining {\"statusCode\": 404}\n\n    Number of calls: 0\n\n      119 |       await getUserById(req as Request, res as Response, next);\n      120 |\n    > 121 |       expect(next).toHaveBeenCalledWith(expect.objectContaining({\n          |                    ^\n      122 |         statusCode: 404\n      123 |       }));\n      124 |     });\n\n      at Object.<anonymous> (tests/unit/user.controller.test.ts:121:20)\n\n  ● User Controller › updateUser › should update own profile\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: 200\n\n    Number of calls: 0\n\n      187 |       await updateUser(req as Request, res as Response, next);\n      188 |\n    > 189 |       expect(status).toHaveBeenCalledWith(200);\n          |                      ^\n      190 |       expect(json).toHaveBeenCalledWith(expect.objectContaining({\n      191 |         success: true,\n      192 |         message: 'User updated successfully'\n\n      at Object.<anonymous> (tests/unit/user.controller.test.ts:189:22)\n\n  ● User Controller › updateUser › should forbid updating other users for non-admin\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: ObjectContaining {\"statusCode\": 403}\n\n    Number of calls: 0\n\n      212 |       await updateUser(req as Request, res as Response, next);\n      213 |\n    > 214 |       expect(next).toHaveBeenCalledWith(expect.objectContaining({\n          |                    ^\n      215 |         statusCode: 403\n      216 |       }));\n      217 |     });\n\n      at Object.<anonymous> (tests/unit/user.controller.test.ts:214:20)\n\n  ● User Controller › updateUser › should allow admin to update any user\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: 200\n\n    Number of calls: 0\n\n      247 |       await updateUser(req as Request, res as Response, next);\n      248 |\n    > 249 |       expect(status).toHaveBeenCalledWith(200);\n          |                      ^\n      250 |     });\n      251 |   });\n      252 | });\n\n      at Object.<anonymous> (tests/unit/user.controller.test.ts:249:22)\n","name":"/Users/arkan/finding-gems/backend/tests/unit/user.controller.test.ts","startTime":1770259605727,"status":"failed","summary":""}],"wasInterrupted":false}
